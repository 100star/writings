Python
drypot 2011-05-07 18:11
지난 3 주정도 Python을 가볍게 둘러보았습니다.
자바 프로젝트에 신규 개발자를 투입하려면 스프링과 하이버네이트 학습하는데 과도한 비용이 발생하기 때문에
교육비용이 적다는 Python을 도입해볼까 시작한 삽질이었습니다.

아래는 이 Python 삽질에 대한 회고인데
3 주란 짧은 시간이었기 때문에 많이 미흡한 통찰일지도 모르겠습니다.

결론을 먼저 적으면, 안타깝게도 Python은 실무에 광범위하게 적용하기에는 시기상조이다라는 생각이 들었습니다.
Python이 나온지 20 년이 되었지만서도.

Python의 장점은 언어 구문의 간결함, 컬렉션의 언어 레벨 지원, 스크립트 언어이면서 OOP 지원,
다양한 C 모듈의 보조, 모든 플랫폼에 광범위하게 구현되어 있고 맥과 리눅스에는 기본으로 설치되어 있는 대중성 등,
언어 문법 자체와 Unix 계열 운영체제와의 강한 결합성에 있습니다.

딱 보면 팔방미인이면서 시스템간 관계도 좋아서 유용하게 써먹을 곳이 많아 보입니다.
실제로도 그렇고요.

하지만 이제 언어의 가치 평가는 문법과 라이브러리 만으로 할 수는 없습니다.
기본 라이브러리 가지고 헬로 월드를 만들어 내 컴퓨터에서 돌리는 것이 끝이 아니니까요.

Python에 대한 장점은 많은 책에서 찾아볼 수 있으니 줄이고요.
여기부터는 제가 생각하는 단점들을 적어보겠습니다.

국내에 Python을 쓰는 사람들이 적습니다.
실제로 이게 가장 큰 문제가 됩니다.
자바 프레임웍 교육비용을 줄이기 위해 Python을 도입하려 했는데, Python 교육 비용이 새로 발생합니다.
Python을 기본으로 알고 다니는 사람이 거의 없으니까요.
모든 개발자가 새로운 언어 학습을 즐기는 것도 아닙니다.
미국 처럼 Python을 대학 프로그래밍 교육과정에 사용해서 Python을 알고 졸업하는 사람이 많다면 좋겠는데,
우리나라 대학은 아직 C 와 Java 를 가르칠 것 같습니다. 왠지.

Python은 OOP 를 지원하긴 하지만 Java 보다 문법이 불안정합니다.
스터틱 타입의 OOP 언어를 오래 쓴 분들이라면 Python의 OOP 문법을 보고 기분이 나빠지실 겁니다.

자바의 경우 모듈은 클래스의 집합이지만, Python은 클래스에 포함되지 않은 펑션들이 존재할 수 있습니다.
자바에서 임포트 개념은 클래스 하나에 대해서만 존재하지만, Python에서는 모듈, 펑션, 클래스 세 가지나 됩니다.
편리해 보이기도 하고, 실제 편리한 부분도 있긴 합니다만, 이것을 임포트 하는 구문이 자바에 비해 아름답지 않습니다.
사실 매우 헷갈려서 기분이 나빠집니다.

Python 2.X 와 3.X 간의 문법이 달라서 호환이 되지 않습니다.
이게 무슨 소리냐 하실텐데요,
3.X 가 나온지 2 년이 넘었지만 Python 커뮤니티는 2.X 에서 3.X 로 이사가지 못하고 있습니다.
장고도 2.X 에서만 돌아갑니다. 언제 3.X 로 이사갈지는 로드맵도 안 뜨고 있습니다.
기업환경에 사용되는 인프라 기술에선 이런 결정과 구현은 있을 수가 없는 겁니다.
phasing out 기간도 없고, 3.X 에선 2.X 가 걍 안 됩니다.

Java 에서는 프로젝트 단위로 사용될 라이브러리를 모아서 배포하던지,
maven 으로 사용되는 라이브러리 목록을 기술하여 maven 으로 실행시키던지 합니다.
Python에서는 virtualenv 란 툴로 별도 디렉토리 트리를 만들어서
프로젝트별로 사용될 Python 런타임 디렉토리 환경을 구축합니다.
bin 디렉토리들에 Python 실행 스크립트도 심어지고, 라이브러리도 각 버추얼 디렉토리 별로 설치합니다.
실행시 각 버추얼 환경의 bin 을 패스에 넣거나 쫓아다니며 써야하는데,
그나마 OS X 에서는 virtualenv 생성시 에러를 뿜어서 더 삽질해 보고 싶은 마음이 사라졌습니다.

Python을 편하게 사용하려면 운영제체가 유닉스 기반이어야 합니다.
OS X 나 리눅스를 개발 플랫폼으로 사용하고 있는 사람이라면 문제가 없는데
현실은 윈도우를 사용하는 개발자가 많다는 것입니다.
쉽게 가려고 Python을 선택했다가는 윈도우에서 개발 잘 하고 있던 자바 개발자들에게
유닉스 교육을 단단히 시켜 우분투로 이사시키던지, 리눅스 컴퓨터를 추가로 지급해야할 필요가 생깁니다.
윈도우에서 리눅스 명령을 실행시키는 모든 기술에 대한 언급은 패스하겠습니다. 그 자체로 짜증이 밀려오므로. =,=

가장 많이 쓰이는 Python 웹 프레임웍은 장고인데,
장고는 ORM, Template Engine, MVC Engine 이 단단하게 결합되어 있는 프로턱트입니다.
장고가 태어난 곳이 신문사이기 때문에 관리자 기능이라던지 기본 스키마들이라던지
먼가 어플리케이션 계층 기능들이 기본으로 많이 따라오는데 이런 것을 좋아한다면 다행이겠지만
저 같이 깨끗한 종이 위에 기본 기능만 가지고 시스템을 올리는 것을 좋아하는 분들은
장고가 제공하는 등등등 기술에서 별로 좋지 않은 냄새를 맡게 되실 겁니다.

장고가 개발된 후 ORM 에는 SQLAlchemy, Template Engine 에는 Mako 라는 라이브러리가 등장해 인기를 얻고 있습니다.
장고에 이런 것들을 쓸 수 는 있지만 그렇게 하는 순간 그것은 더이상 장고가 아니게 됩니다. 등등등 서비스가 작동 정지되므로.
그래서 이럴바에는 아예 간단한 RV (Resource View) Engine 에 SQLAlchemy 와 Mako 를 쓰는 것이 나을 수 있겠습니다.
이런 시장을 채우기 위해 Pyramid 라는 것이 나오기 시작하더군요.

요컨데, Python을 쓴다고 해서 꼭 장고여야한다는 것은 아닙니다.

Python의 속도에 대해 간단히 언급하면
CPython (C 로 만든 Python 인터프리터) 은 동급 머신의 Java 6 Server JVM 에 비해 보통 10 배에서 40 배 정도 느립니다.
근데 PyPy 라고 JIT 기능이 붙은 실행기의 경우 CPython 보다 5 배에서 10 배 정도 빠르다고 하니
현재도 실무에 못쓸 정도로 느린 것은 아니나 PyPy 가 보급되면 속도 문제는 많이 해결될 수 있으리라 봅니다.
PyPy 는 개발이 시작된지 10 년이 넘었고 요즘 이쪽 분위기 좋은 것 같습니다.
직접 써보진 않았지만 커뮤니티 분위기로 봐서는 실무에 사용할만한 듯.
PyPy 도 현재 3.X 를 지원하지 못하고 Python 2.7 문법을 지원하고 있습니다.

Python 모듈을 웹에 서비스하려면 WSGI 라는 프로토콜을 구현한 제품들을 사용합니다.
아파치나 nginx 에는 mod_wsgi 를 붙이고,
wsgi 를 구현한 Python 웹 서버를 중간에 띄워서,
이 wsgi 웹 서버를 통해 내 Python 어플리케이션을 실행합니다.
많은 Python 웹 서버들이 독자적으로 개발되어 경쟁을 했습니다.
해서 15 년 되오는 구닥다리 Servlet 인터페이스를 사용하는 자바에 비해
URL 라우팅이라던지 웹 프로토콜 부분은 Python 환경이 확실히 좋아보입니다. 만,
Servlet 가지고도 어떻게 저떻게 꾸역 꾸역 사용은 할 수는 있는 것이 사실. =,=

또 하나 무시할 수 없는 것이 Lucene 검색 솔루션입니다.
Lucene 은 자바로 되어있기 때문에 Python 과 매끄럽게 붙이지 못합니다.
Jython 을 사용하던지 CPython 엔진에 JVM 을 붙여 돌리던지, 외부 별도 프로세스로 돌려야합니다.
어쨌거나 모두 지저분.

개발시 개발자에게 부하가 가해지는 부분은 언어 자체의 이해도에도 있겠지만,
런타임 플랫폼, 같이 써야하는 라이브러리, 하위 호환 문제, 제품의 패키징과 배포,
라이브러리 가져다 쓰는 방법, 개발 도구, 서버 설정등 많은 요소가 관여됩니다.
언어를 바꾸면 이 모든 부분을 새로 공부해야하는 문제가 발생함과 더불어
이 모든 과정에 문제가 없어야 개발에 전념할 수 있게 됩니다.
그런데, 새로 이사간 마을에서 이런 문제가 발생하지 않을 수가 없습니다.
Python은 언어 부분과 개발 주기에 부하를 줄여주긴 하지만,
라이브러리 관리나, 플랫폼 학습비용, 패키징, 서버 설정 부분에서는 자바보다 크게 좋을 것이 없어 보였습니다.
사실 자바에서 쓰던 방식을 모두 버리고 이걸 다 새로 배워야하는데
조직 전체에 이걸 요구하는 것은 쉽게 결정내릴 문제가 아닙니다.

Python으로 이동시켜서 Python에 관련된 모든 문화를 학습시키고 또 삽질하게 하는 것이
이미 자바를 잘 사용하고 있는 사람들에게 스프링과 하이버네이트를 학습시키는 것보다 크게 이익이라는 느낌을 못 받았습니다.
Python 환경에서도 언어만 쉬울 뿐 나머지 영역에서는 삽질을 해야합니다.
여기도 먼가 잘 안 되는 것들이 있어서 이것을 해결하려면 또 반나절, 하루, 며칠을 까먹을 것이며,
하나를 하는데 두 가지 이상 방법이 존재하는 것들이 있어서 머리를 싸매고 선택해야하는 경우들이 있습니다.
다시 적지만 자바는 그렇지 않다는 것이 아니고 자바와 비교해 이런 언어 외적인 부분은 나을 바가 없다는 말입니다.
기존에 쓰던 자바를 계속 쓰면서 이런 부분의 문제를 수선해 나가는 것이
기반 언어와 문화 전체를 교체하는 것 보다 안전해 보인다는 생각이 듭니다.

스프링과 하이버네이트가 완벽히 다루기 쉬운 기술은 아니지만
능력자가 초기 시스템을 훌륭이 만들어 놓고,
보조 개발자들이 조금씩 수정해 가면서 업무에 활용하는 방향으로 간다면
전 개발자가 스프링 마스터리가 되어야한다는 강박감도 줄일 수 있을 것 같습니다.