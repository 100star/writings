데이터베이스 삽질의 기록 2010.03
drypot 2010-11-28 14:40
작년 8 월에 자바 플랫폼으로 이주 준비 시작하면서 MySQL 간단히 들춰보다가
좋은 점도 있지만 좀 이상해 보이는 구석들도 있어서 일단 덮고,
실험 코드 돌리는 데는 H2 라는 자바 데이터베이스를 썼다.

Derby, HSQLDB 거쳐서 이 놈들 문제가 좀 있어 MySQL 가기 전에 잠깐 머문다고 선택한 H2 였는데,
2 주간 MySQL 열심히 보고나니 버리려던 H2 가 더 괜찮아 보인다.

제일 걸리는 문제가 MySQL 에서 Reverse Index 지원을 안 한다는 것인데,
지난 4-5 년간 요청이 줄기차에 있었는데도 지원 안 하는 것으로 봐서 앞으로도 한동안 지원 안 할 것 같다.

통신에 UTF16 을 쓰지 못하고 UTF8 만 가능해서 웹서버에서 디비 서버로 보낼 때 UTF8 로 변환해야하고,
디비 서버에서 하드에 저장할 때 또 UTF16 으로 변환하는 삽질도 한다.
(이 문제는 저장도 UTF8 로 하는 것으로 후에 절충을 했다.)

PostgreSQL 은 UTF16 저장 자체가 안 된다.
UTF8 만 가능하므로 하드, 메모리 용량 요청 수치가 20% 이상은 올라갈꺼다.

H2 는 크기가 1 메가이다.

실제 서비스 돌려보면서, 사람 몰려도 어찌 잘 버티는지 실험해보는 거 재밋을 것 같다.